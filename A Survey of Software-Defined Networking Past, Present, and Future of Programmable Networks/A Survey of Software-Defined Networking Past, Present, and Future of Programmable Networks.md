![](微信截图_20200924112927.png)

摘要： 最近这个「可编程网络」的观点因为「软件定义网络」而重新受到各方关注。而软件定义网络又被视为一种非常激进的新式网络，这种网络的核心理念就是通过极大的简化网络管理以及提供可供编程的接口。

本文阐述了最新的可编程网络并且强调了软件定义网络。我们提供了一个从早期概念形成到如今发展的历史视角来看待可编程网络；再就是软件定义网络架构以及 OpenFlow 标准。

## 1. 引言

因为各种协议以及网络设备的复杂性，并且因为网络状态的不确定性以及工具缺乏。结论就是现在的网络管理非常困难并且易于出错。

软件定义网络是一种新的网络范式，旨在将硬件从「控制决策」这个行为中解放出来。

软件定义的网络的核心思想就是允许软件开发者使用访问存储和计算资源一样简单地方式来访问网络资源。在 SDN 中，网络管理一般逻辑的集中在一个软件定义的控制器上（控制层），并且网络设备由此转化成简单地数据包转发设备（数据层），转发策略由这个可编程的控制器提供。

本文阐述了最新的可编程网络，提供了一个该领域的历史视角，并且详细描述了一个 SDN 范例和架构。

## 2. 早期的可编程网络

在 OpenFlow 引起业界关注之前，还有一些可编程网络的先驱者：

* Open Signaling： 1995， 旨在让 ATM ， Internet 以及移动网络更加开放，更加可扩展，并且可编程。这个架构已经开始相信让数据交换硬件和控制软件费力是非常有必要的。
* Active Networking： 1990s 中期，最先假定了一种可以进行编程来定制服务的网络结构。
* DCAN： 设计并且开发一个可扩展的 ATM 控制和管理网络；
* 4D Project： 2004， 还是强调了路由决策逻辑和协议管理的分离。这个网络假设了在决策层有网络的全局视野。
* NETCONF： 2006， 这个协议允许网络设备提供一个可编程接口。
* Ethane： OpenFlow 的直接前辈。 2006， 该结构使用一个中心化的控制器来管理整个网络的策略和安全。同软件定义网络一样，Ethane 拥有两个组建：一个决定数据包如何转发的控制器，一个维护流表并且负责控制器安全的交换机。这个网络为以后的软件定义网络打下了基础。

## 3. 软件定义网络架构

现在的传统网络是非常封闭的，也就是说，一旦部署并且作用于生产之后，升级现有的网络架构是非常困难的，换句话说，部署一个现有协议的新版例如 IPv6 是非常困难的一件事，更不要说部署一个全新的协议和服务了。

软件定义网络将数据转发硬件同转发逻辑控制器分离开来，这样就允许通过控制器来以更简单地方式部署协议和应用。这样网络就被精简成了简单地数据转发器，和转发逻辑控制器。

### 当前的软件定义网络架构

OpenFlow 和 ForCES 都是依照软件定义网络的原则，也就是将数据转发和转发决策相分离所设计的。

* ForCES：当前的主流的硬件设计是将新式的转发硬件和第三方的控制其集成在一个新的网络设备中。这样，控制层和数据层虽然在空间上紧密相联，但是实际上数据层和控制层是完全剥离开的。ForCES 定义了两种逻辑实体，一种叫做「转发元素」，另一种叫「控制元素」，这两者构成了 ForCES 的通信协议。

* OpenFlow： 对于 OpenFlow 来说，转发设备包含一个或者多个「流表」，并且通过一个抽象层使用 OpenFlow 协议跟控制器进行通信。「流表」包含「流入口」，每个「流入口」决定了数据包属于哪个数据流，并且应当如何转发。

    控制器和转发器之间的通信是借助 OpenFlow 协议的。这个协议定义了一组可以在安全通道里传输的信息。使用 OpenFlow 协议可以更新，添加和删除流表中的流入口。

#### 讨论

在 ForCES 和 OpenFlow 之间有一些不同和相同之处需要讨论一下。

* 转发设备：在一个软件定义网络中，转发设备往往就只是基础的转发硬件，并且通过一个位于抽象层的接口，加载位于控制器的控制逻辑和算法。这样的设备在软件定义网络中，被称为「交换机」。

    在一个 OpenFlow 网络中，交换机有两种类型的：单纯交换机和复合交换机。单纯交换机没有内置的控制系统，并且完全依赖于控制器来进行转发决策。复合交换机在支持 OpenFlow 的基础上也支持传统操作和协议。

    * 处理转发规则；
    * 安装转发规则；

* 控制器：控制器之间可以通过内置的模块和其他的控制器进行通信；并且还能通过在转发硬件上的抽象层上实现同其他转发设备的通信。

    * 扩展性：一个单一的控制器能处理相当惊人的数量的新的流请求，除了一些非常巨大的网路之外基本都能应付。

        还有一个核心的问题就是控制器的选址问题，控制器选址不仅仅关系到控制器数量的优化，还有网络的拓扑结构。这种决定通常是在追求平均延迟和避免最差延迟的权衡中作出的。控制器和转发设备之间的通信延迟是一个在衡量网络性能时非常重要的指标。

        并且，控制器模型也深刻影响着网络的扩展性。

    * 控制器模型：

        * 中心化的 VS 分布式的：尽管控制器之间的通信在 OpenFlow 中没有定义，但是任何形式的分布或者精简对于控制层来说都非常必要。一个物理上的中心化控制器有可能对整个网络单点失效；因此， OpenFlow 允许一个转发设备连接多个控制器，以防单点失效造成整个网络的瘫痪。
        * 控制粒度：因为数据的收发一般是以流的方式呈现。因为在软件定义网络中，网络元素是被远程控制的，所以数据层和控制层的互通是经常性开销。 **<u>所以，使用数据包层面的控制粒度会增加额外的延迟</u>** 。当控制单一的数据流时，流的第一个数据包将决定整个流的转发策略。
        * 响应式 & 主动式：在响应式控制模型下，转发元素对每一个新流做转发决定时都要咨询控制器。但是相对的，主动式控制器会将流表的每一次更新都主动推送给转发器。

        一个能被当作操作系统来工作地控制器必须实现两个接口：一个「南向」接口，用来和交换机进行通信；一个「北向」接口，用来和程序员（可编程控制）和应用软件通信。

* 南向通信：控制器 - 交换机：一个非常重要的方面就是数据层和控制层的数据传输。当转发设备被一个控制器通过公开接口控制，让连接保持安全和有效是非常重要的。

* 北向通信：控制器 - 应用服务：外接的管理系统或者网络服务可能要拉取关于下层网络的控制信息，或者控制网络的行为以及策略。

* 为标准化而努力。

## 4. SDN 开发工具



## 5. SDN 应用



## 6. 科研挑战以及未来方向

1. 控制器和交换机的设计；
2. 扩展性以及软件定义网络的性能；
3. 控制器-应用服务的接口；
4. 虚拟化以及云服务应用；
5. 信息中心化的网络；
6. 将软件定义思想应用于各种各样的网络。
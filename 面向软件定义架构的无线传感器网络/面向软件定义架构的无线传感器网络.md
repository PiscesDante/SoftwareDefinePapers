# 面向软件定义架构的无线传感器网络

**摘要** ：根据应用定制的系统具有开发简便、运行高效等优点，但不适合未来大规模部署．这是因为如果这些系统跟应用密切绑定、难以更新，那么系统一经部署就难以更新其软件，从而阻碍了软件创新的进程．软件定义的思想可以有效解决该问题。

传感器网络主要以信息的采集为核心，而因特网主要以信息的传输为核心。

**<u>本文列举了在设计一个通用、高效的软件定义传感器网络架构时可能遇到的挑战，并回顾了一些有用的技术</u>** 。这些技术有的来自于现有方案，有的能够直接被用来解决一部分挑战。

## 1. 引言

这些由微型嵌入式芯片、低功耗无线设备和各种传感器组成的系统，正以空前的规模和密度部署在我们的生活中，催生了对新一代监测、控制软件的需求．由于资源的限制，这些系统一般被用在特定的应用中。

传感器网络是面向特定应用的．传统的网络在设计初期就考虑到了在不同应用中的通用性，但我们有理由相信传感器网络更加适用于某些特定的场景。于是这些传感器网络只能在特定的应用中使用。

于是，为了破除这种局限性，软件定义的概念受到了广泛的关注．基于这一架构，软件的设计将更加灵活，应用的升级将更加简单。

软件定义网络将数据层与控制层分离，路由器与交换机只需要依据控制层的规则进行数据包的转发，使整个网络变得更加灵活可控．

**<u>软件定义传感器网络是指运用了软件定义技术进行感知、路由、测量等任务的新型传感器网络．软件定义传感器网络和传统软件定义网络既有联系也有区别．传统的软件定义网络技术关注信息的传输，主要研究软件定义路由．由于传感器网络还需进行数据感知，软件定义传感器网络除了关注软件定义路由以外，同时也要关注软件定义感知等其他方面．和传统传感器网络相比，我们总结的软件定义传感器网络优势如下</u>** ：资源使用充分，简单地配置和管理，快速更新，快速的技术革新。

传感器网络与因特网的软件设计存在诸多差异，其最大的差异在于 **<u>传感器网络主要以信息的采集为核心，而因特网主要以信息的传输为核心</u>** 。

## 2. 软件定义传感器网络架构

Zeng 等人提出了「感知即服务」架构．也就是 Sensing as  a Service 。在这种架构中，系统管理员可以基于无线重编程技术，按需对传感器网络中部分节点进行重编程，部署指定的应用。

在传统的 Open Flow 协议中，控制器与交换机之间使用 TCP / IP 协议建立连接．这种做法对于不使用 IP 地址的传感器网络来说并不适用。 <u>但是对于无人系统来说，我们可以使用 IP 地址作为寻址手段</u> 。

Gante 等人认为，软件定义网络中的逻辑控制层是软件定义网络的精华所在。

在下层的数据转发层中，数据包以数据流为单位进行处理．一个数据流是指用户定义的一组具有相同性质的数据包，这些性质由流表中的匹配规则来指定。

基于软件定义传感器网络的架构可以在同构网络中实现．在同构网络中，一般有两种节点： **<u>具有转发功能的普通节点和具有向普通节点发出执行命令的控制节点</u>** ．开发者可以依据ＡＰＩ文档实现与控制节点的交互．典型的例子就是「GreenOrbs」。但是这个同构网络有个问题就是控制结点有可能负担过重而导致网络性能下降。解决方案就是要么采用层级控制结点，要么采用对等的分布式控制结点进行网络管理。

## 3. 挑战及关键技术

近年来基本上所有的软件定义传感器网络架构的设计从一般来说，高效与通用二者不可兼得。并且基本上停留在原型阶段。要么开销巨大，要么通用性不佳。

设计一个通用、高效的软件定义传感器网络，面临以下 ５ 项关键挑战： 

* **<u>通用的软件定义架构</u>** ：系统抽象、虚拟化、动态链接和加载、动态代码注入。
* **<u>资源的有效分配</u>** ：能量最小化、混合整数线性规划。
* **<u>快速更新与实时控制</u>** ：连通支配集计算、有利干涉、流水线传输机制。
* **<u>一致性</u>** ：两阶段更新。
* **<u>安全性</u>** ：Merkle 散列树、可信基随机阈值限速检测算法、最大熵检测算法。

其中，面向传感器网络设计一个通用的软件定义架构尤为重要，它是基于软件定义的思想创建上层应用的基础。

**<u>然而，如何在软件定义的传感器网络中设计一个安全、轻量的系统仍然是一个开放性的问题</u>** 。

### 3.1 通用的软件定义架构

#### 挑战

如何设计一个通用的、开销最小的架构，以支持不同的软件定义功能？

#### 关键技术

系统抽象技术是架构设计中的关键技术。软件定义路由实现了逻辑控制层与普通节点层之间的抽象．普通节点中的程序根据流表中的条目，执行不同的路由任务，网络管理员通过修改流表的参数来动态的配置不同的路由策略。

此外，如果将整个系统（包括数据段和代码段）抽象成模块，利用动态装载器更新该模块，就实现了整个系统层次的动态更新。

为了实现以上所述的抽象技术，可以使用以下的方法：

* 虚拟化技术：虚拟机可以设计成通用的。
* 动态链接和加载技术：模块化操作系统为代码的执行或加载提供了动态链接器或加载器。独立的模块可以被动态的加载到传感器结点上。
* 动态代码注入技术：动态代码注入允许用户在程序运行时将代码注入到原始程序中．动态代码不是通过加载来执行，而是通过特殊的方法，如 Trampoline 。

如何运用和改进这些技术以满足传感器节点低开销的需求，值得更进一步的研究。

### 3.2 资源的有效分配

#### 挑战

如何分配网络资源，才能更好地满足用户需求？

#### 关键技术

**<u>在一个优化资源分配的问题中，目标函数通常是一个最小化开销函数，或者是一个最大化收益函数</u>** 。

Zeng 等人考虑了三种与服务质量（ Quality of Service ）相关的问题：传感器的激活，任务的映射，以及感知程序的调度．

Huang 等人提出了基于强化学习机制的冗余数据过滤技术和负载均衡路由技术，以提高能量的利用率以及对环境变化的适应能力．

由于传感器节点中有限的电池容量，节能始终是传感器网络面临的重要问题之一．传感器网络中变化频繁的拓扑和更新频繁的路由表导致传感器网络的能量消耗明显。这里的目标是减少路由器的决策动作，从而实现节能。

### 3.3 快速更新和实时控制

#### 挑战

如何实现实时、可靠的带宽内控制？

#### 关键技术

拓扑构建的目标是 **<u>设计一个部署控制节点的方案</u>** ，在保证控制节点和普通节点的通信的情况下最小化部署成本。 **<u>现有的拓扑算法已经能有效的解决此问题</u>** 。

在拓扑构建的同时，还需要保证控制器与传感节点间的通信必须是快速和可靠的．传统方法通过使用三次握手机制来实现可靠性。这种方法是可靠的，但是不是快速的。为了解决这个问题有很多研究工作致力于低功率无线电的有利干扰。

另一种提高消息分发速度的机制为 **<u>流水线发包机制</u>** 。

更进一步的，将 **<u>低功率无线电的有利干扰</u>** 和 **<u>流水线发包机制</u>** 结合起来可以获得更好地性能和效果。

如何实现实时、可靠的带宽内控制，关键在于如何部署控制节点，以及如何将控制消息快速、可靠地从控制节点分发到普通传感节点上．对于前者，现有的拓扑算法已经能够有效的解决，如连通支配集规划等．对于后者，在传统传感器网络中一直是研究热点并有很多已有工作值得借鉴．

### 3.4 一致性

#### 挑战

一致性问题有两类．一类是在有多个控制节点的情况下，如何保证每个控制节点的逻辑视图的一致性；另一类是如何保证不同版本的网络配置的一致性．

#### 关键技术

这个问题还是由于需要多个控制器进行控制引出的（单个控制器的性能已经到了瓶颈）。多个控制器的软件定义网络中，每个控制节点都有全网的逻辑视图，为了使不同的控制节点能够协同工作，保持这些控制节点的一致性是十分重要的。

具体的应用就是 HyperFlow ：基于 OpenFlow 的分布式事件驱动的控制层，它保证了控制层中控制节点逻辑视图的一致性。当某个控制节点状态改变时，可以发布一个状态改变的事件，其他的控制节点收到事件后，通过重现事件来更新状态，达到逻辑视图的一致。

对于逻辑视图的一致性，现有的工作（如 HyperFlow 等）已能在链路质量稳定的因特网中较好的运行，然而这在链路质量不稳定的无线传感器网络中是不适用的．对于网络配置的一致性，现有工作（如两阶段更新机制）虽然能够较好的实现网络配置的原子操作，排除中间状态的数据流，然而每次更新时需要消耗大量的时间排除网络内上一个版本的所有数据包，这在有实时更新的网络中是不适用的。

因此，在链路质量不稳定的网络中，如何设计能够满足实时性需求的一致性网络配置更新系统，是一个值得进一步研究的问题。

### 3.5 安全性

#### 挑战

如何抵御攻击者对传感器网络的攻击和控制？

#### 关键技术

初步的方案：传感器网络中节点认证分发程序的方案、在未来的家居传感器网络中搭建异常检测系统的方案等等。

控制节点通过编程进行细粒度的数据包检测，从而监测经过转发节点的网络流量，这样基本能实现对于数据包的检查。

**<u>基于 Merkle 树的数字签名</u>** 是一种提供认证服务的方法（检查数据包是否合法）此种验证方式虽然能够迅速的舍弃被破坏的子数据包并立即向发送方请求重传该分块数据包，但同时也大大增加了可信源与传感器节点之间的通信开销。

**<u>可信基随机阈值限速检测算法</u>** 是一种检测网络中主机是否受到蠕虫病毒感染的技术，它的思想是：蠕虫病毒为了在网络中迅速的扩散自己，会对全网进行连接请求测试，在一个网络中，如果某个主机连接请求的失败次数远大于其他主机，则认为这个主机受到了蠕虫病毒的感染。

**<u>恶意流量限速算法</u>** 是一种在主机端限制病毒继续扩散的机制。

**<u>最大熵检测算法</u>** 利用最大熵估计算法检测网络中的异常数据包。

在节点有限资源的情况下，如何有效抵御软件定义传感器网络中的攻击仍然是一个开放性的问题。

## 4. 分类

本文将现有的软件定义传感器网络结构分类为：软件定义感知、软件定义路由、软件定义测量、软件
定义调试和其他。

### 4.1 软件定义感知

借助软件定义感知，传感器网络可以通过动态地配置节点来实现不同的感知应用。可见，为了实现高效的软件定义感知，节点应当具备增量、动态的更新程序的能力．现有工作已经在实现软件定义感知功能方面有所尝试：虚拟化技术（如 3.1 节所述）、动态链接与加载以及动态代码注入技术。

### 4.2 软件定义路由

当前已经有一些方案尝试实现了软件定义路由的功能：与传统软件定义网络类似，包括将控制平面和数据平面分离的方案，以及利用有限状态机定义传感器节点行为的方案等．

例如 SensorOpenFlow 。此架构与软件定义网络架构类似，分离了控制层与数据层，能够对包的路由策略实现更灵活的配置。

